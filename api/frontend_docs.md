## AI Study Assistant Backend API Documentation

This document outlines the API endpoints for the AI Study Assistant Backend, including request and response formats, and session management.

### Base URL
`http://localhost:8000` (or your deployed backend URL)

### 1. Planner Integration (Day 2)

#### `POST /planner/generate-plan`
Generates a study plan based on user-provided topics, dates, and study hours.

- **Request Body:**
```json
{
  "topics": [
    "Introduction to Python",
    "Data Types and Variables"
  ],
  "start_date": "YYYY-MM-DD",
  "exam_date": "YYYY-MM-DD",
  "hours_per_day": 3.0
}
```
- **Response Body (Success):**
```json
{
  "days": [
    {
      "date": "YYYY-MM-DD",
      "tasks": [
        {
          "topic_name": "Topic Name",
          "subject_name": "Subject Name",
          "task_type": "theory | practice | revision",
          "duration_hours": 1.0,
          "priority_score": 0.8
        }
      ],
      "total_hours": 3.0
    }
  ],
  "start_date": "YYYY-MM-DD",
  "exam_date": "YYYY-MM-DD",
  "hours_per_day": 3.0,
  "status": "realistic | compressed | high_yield_only | last_minute"
}
```
- **Response Body (Error):**
```json
{
  "error": true,
  "message": "Readable explanation of the error"
}
```

### 2. Teacher Mode Integration (Day 4)

#### `POST /teacher/action`
Routes requests to the appropriate teacher mode function (e.g., explain a topic, summarize, give examples).

- **Request Body:**
```json
{
  "action": "explain_topic | summarize_topic | give_examples | check_understanding | breakdown_steps | explain_plan | explain_today",
  "payload": { /* Action-specific payload, e.g., {"topic_name": "Normalization", "level": "deep"} */ },
  "session_id": "user123"
}
```
- **Response Body (Success):**
```json
{
  "messages": [
    { "role": "system", "content": "..." },
    { "role": "user", "content": "..." }
  ],
  "response_format": { "type": "json_object" },
  "metadata": { "teacher_action": "...", "topic_name": "..." }
}
```
(The `content` of the `user` message will contain the structured JSON output from the LLM)

- **Response Body (Error):**
```json
{
  "detail": "Error message"
}
```

### 3. Practice Mode Integration (Day 5)

#### `POST /practice/action`
Routes requests to the appropriate practice mode function (e.g., generate questions, check answers, update performance).

- **Request Body:**
```json
{
  "action": "generate_questions | check_answer | update_performance | topic_stats | suggest_difficulty",
  "payload": { /* Action-specific payload */ },
  "session_id": "user123"
}
```
- **Example Payload for `generate_questions`:**
```json
{
  "action": "generate_questions",
  "payload": {
    "topic_name": "Normalization",
    "difficulty": "auto",
    "count": 5
  },
  "session_id": "user123"
}
```
- **Response Body (Success):**
```json
{
  "messages": [
    { "role": "system", "content": "..." },
    { "role": "user", "content": "..." }
  ],
  "response_format": { "type": "json_object" },
  "metadata": { "practice_action": "...", "topic_name": "..." }
}
```
(The `content` of the `user` message will contain the structured JSON output from the LLM)

- **Response Body (Error):**
```json
{
  "detail": "Error message"
}
```

### 4. Exam Mode + Revision Mode (Day 6)

#### `POST /revision/action`
Routes requests to the appropriate revision/exam mode function (e.g., get revision points, flashcards, high-yield topics, exam questions).

- **Request Body:**
```json
{
  "action": "revision_points | revision_flashcards | high_yield_topics | last_minute_revision | expected_exam_questions",
  "payload": { /* Action-specific payload */ },
  "session_id": "user123"
}
```
- **Example Payload for `high_yield_topics`:**
```json
{
  "action": "high_yield_topics",
  "payload": {
    "fraction": 0.4,
    "min_count": 5
  },
  "session_id": "user123"
}
```
- **Response Body (Success):**
```json
{
  "messages": [
    { "role": "system", "content": "..." },
    { "role": "user", "content": "..." }
  ],
  "response_format": { "type": "json_object" },
  "metadata": { "revision_action": "...", "topic_name": "..." }
}
```
(The `content` of the `user` message will contain the structured JSON output from the LLM, or a direct JSON response for `high_yield_topics`)

- **Response Body (Error):**
```json
{
  "detail": "Error message"
}
```

### 5. Global Error Handler (Day 7)

All unhandled exceptions will return a standardized error response:

- **Response Body:**
```json
{
  "error": true,
  "message": "An unexpected error occurred: [Error details]"
}
```

### Session ID Usage
The `session_id` is a string identifier used to maintain conversational state and user-specific performance data across different API calls. It should be generated by the frontend and passed with relevant requests. The backend uses an in-memory store for sessions, so restarts will clear session data.
